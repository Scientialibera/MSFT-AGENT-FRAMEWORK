# ==============================================================================
# AGENT CONFIGURATION - Copy this file and customize for your project
# ==============================================================================
# This file contains all configuration for your AI Assistant.
# Copy to your project root and update the values.
# ==============================================================================

[agent]
# System prompt file (relative to project root)
system_prompt = "config/system_prompt.txt"

# Logging level (DEBUG, INFO, WARNING, ERROR)
log_level = "INFO"

# ==============================================================================
# AZURE OPENAI CONFIGURATION
# Required for the agent to function
# ==============================================================================

[agent.azure_openai]
# Your Azure OpenAI endpoint URL
# Example: "https://your-resource.openai.azure.com/"
endpoint = "https://your-resource.openai.azure.com/"

# Your deployment name for chat completions
# Example: "gpt-4o"
deployment = "gpt-4o"

# API version (optional, defaults to latest)
api_version = "2024-10-01-preview"

# ==============================================================================
# TOOL CONFIGURATION (Local Tools)
# Define tool-specific settings here
# Each tool can have its own section: [agent.tools.<tool_name>]
# ==============================================================================

[agent.tools]
# Directory containing tool JSON definitions
config_dir = "config/tools"

# Example: Configure settings for the example_tool
# [agent.tools.example_tool]
# api_base_url = "https://api.example.com"
# timeout = 30
# max_retries = 3

# ==============================================================================
# MCP CONFIGURATION (Model Context Protocol Servers)
# Connect to external MCP servers for additional tool capabilities
# ==============================================================================

# MCP servers are defined using [[agent.mcp]] array format.
# Supported types: "stdio", "http", "websocket"

# ------------------------------------------------------------------------------
# Example 1: Local stdio MCP server (runs as subprocess)
# ------------------------------------------------------------------------------
# [[agent.mcp]]
# name = "calculator"
# type = "stdio"
# enabled = true
# command = "uvx"
# args = ["mcp-server-calculator"]
# # Optional: environment variables for the subprocess
# # env = { API_KEY = "xxx" }

# ------------------------------------------------------------------------------
# Example 2: HTTP/SSE MCP server
# ------------------------------------------------------------------------------
# [[agent.mcp]]
# name = "my-api"
# type = "http"
# enabled = true
# url = "https://api.example.com/mcp"
# # Optional: authentication headers
# # headers = { Authorization = "Bearer your-token" }

# ------------------------------------------------------------------------------
# Example 3: WebSocket MCP server
# ------------------------------------------------------------------------------
# [[agent.mcp]]
# name = "realtime-data"
# type = "websocket"
# enabled = true
# url = "wss://api.example.com/mcp"
# # Optional: authentication headers
# # headers = { Authorization = "Bearer your-token" }

# ==============================================================================
# WORKFLOW CONFIGURATION (Multi-Agent Pipelines)
# Define multi-agent workflows for complex orchestration patterns
# ==============================================================================

# Workflows allow you to chain multiple agents together in predefined patterns.
# Supported types: "sequential", "custom"

# ------------------------------------------------------------------------------
# Example 1: Sequential Workflow (agents execute in order)
# ------------------------------------------------------------------------------
# [[agent.workflows]]
# name = "content-pipeline"
# type = "sequential"
# enabled = true
# 
# # Each agent's output becomes the next agent's input
# [[agent.workflows.agents]]
# name = "Researcher"
# instructions = "Research the given topic and provide key facts and insights."
# 
# [[agent.workflows.agents]]
# name = "Writer"
# instructions = "Write engaging content based on the research provided."
# 
# [[agent.workflows.agents]]
# name = "Reviewer"
# instructions = "Review the content and provide a final polished version."

# ------------------------------------------------------------------------------
# Example 2: Custom Workflow (user-defined graph with edges)
# ------------------------------------------------------------------------------
# [[agent.workflows]]
# name = "support-escalation"
# type = "custom"
# enabled = true
# start = "Triage"
# 
# [[agent.workflows.agents]]
# name = "Triage"
# instructions = "Analyze the customer issue and determine severity."
# 
# [[agent.workflows.agents]]
# name = "TechSupport"
# instructions = "Provide technical solutions for the issue."
# 
# [[agent.workflows.agents]]
# name = "Manager"
# instructions = "Handle escalated issues with customer care."
# 
# [[agent.workflows.edges]]
# from = "Triage"
# to = "TechSupport"
# 
# [[agent.workflows.edges]]
# from = "TechSupport"
# to = "Manager"

# ==============================================================================
# MEMORY CONFIGURATION (Chat History Caching & Persistence)
# Manages session state across conversations with Redis cache and ADLS persistence
# ==============================================================================

# Enable memory management (required for chat_id session support)
# [agent.memory]
# enabled = true

# ------------------------------------------------------------------------------
# Cache Configuration (Azure Cache for Redis)
# Uses DefaultAzureCredential - no API keys required
# ------------------------------------------------------------------------------
# [agent.memory.cache]
# enabled = true
# 
# # Azure Cache for Redis hostname (without https://)
# host = "your-redis.redis.cache.windows.net"
# 
# # Port (6380 for SSL, 6379 for non-SSL)
# port = 6380
# 
# # Use SSL (required for Azure Cache for Redis)
# ssl = true
# 
# # TTL in seconds (how long chats stay in cache)
# ttl = 3600  # 1 hour
# 
# # Key prefix for chat sessions
# prefix = "chat:"
# 
# # Redis database number
# database = 0

# ------------------------------------------------------------------------------
# Persistence Configuration (Azure Data Lake Storage Gen2)
# Long-term storage for chat history. Uses DefaultAzureCredential.
# ------------------------------------------------------------------------------
# [agent.memory.persistence]
# enabled = true
# 
# # ADLS Gen2 storage account name
# account_name = "yourstorageaccount"
# 
# # Container for chat history
# container = "chat-history"
# 
# # Folder within container
# folder = "threads"
# 
# # When to persist: "ttl+SECONDS" = SECONDS before cache TTL expires
# # Example: ttl+300 means persist 5 minutes before cache expires
# schedule = "ttl+300"
